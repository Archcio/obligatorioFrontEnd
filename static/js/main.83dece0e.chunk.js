(this["webpackJsonpprueba-cra"]=this["webpackJsonpprueba-cra"]||[]).push([[0],{28:function(t,e,a){t.exports=a(45)},33:function(t,e,a){},34:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){},44:function(t,e,a){},45:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),o=a(19),c=a.n(o),i=a(8),l=(a(33),a(11)),u=a(12),s=a(16),p=a(13),m=a(17),d=a(5),f=a(9),g=a(10),h=a(15),E=(a(34),Object(d.f)((function(t){var e=t.history,a=Object(r.useState)({email:"",password:"",errorMsg:""}),o=Object(h.a)(a,2),c=o[0],i=o[1],l=c.email,u=c.password,s=c.errorMsg;Object(r.useEffect)((function(){sessionStorage.removeItem("usuarioLogueado")}),[]);var p=function(t){var e=t.target,a=e.name,r=e.value;i(Object(g.a)({},c,Object(f.a)({},a,r)))};return n.a.createElement("div",{className:"login"},n.a.createElement("form",{className:"login-form"},n.a.createElement("label",{htmlFor:"email"},"Email de usuario: "),n.a.createElement("input",{type:"email",name:"email",value:l,onChange:p,required:!0}),n.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a: "),n.a.createElement("input",{type:"password",name:"password",value:u,onChange:p,required:!0}),n.a.createElement("input",{type:"button",value:"Iniciar Sesi\xf3n",onClick:function(t){t.preventDefault(),fetch("http://tiendaonline2020.herokuapp.com/api/user/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:l,password:u})}).then((function(t){return t.json()})).then((function(t){console.log("\xc9xito!",t),t.status&&200!==t.status?i(Object(g.a)({},c,{errorMsg:"No existe un usuario con dicha contrase\xf1a. Intente nuevamente."})):(sessionStorage.setItem("usuarioLogueado",1),e.push("/productos"))})).catch((function(t){return console.log("Error!",t)}))}}),n.a.createElement("input",{type:"button",value:"Registro",onClick:function(){return e.push("/registro")}}),s&&n.a.createElement("h2",{className:"error"},s)))}))),v=(a(40),Object(d.f)((function(t){var e=t.history,a=Object(r.useState)({email:"",password:"",errorMsg:""}),o=Object(h.a)(a,2),c=o[0],i=o[1],l=c.email,u=c.password,s=c.errorMsg,p=function(t){var e=t.target,a=e.name,r=e.value;i(Object(g.a)({},c,Object(f.a)({},a,r)))};return n.a.createElement("div",{className:"registro"},n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("http://tiendaonline2020.herokuapp.com/api/user/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:l,password:u})}).then((function(t){return t.json()})).then((function(t){console.log("\xc9xito!",t),t.status&&200!==t.status?i(Object(g.a)({},c,{errorMsg:"Datos invalidos. Intente nuevamente."})):(sessionStorage.setItem("usuarioLogueado",1),e.push("/productos"))})).catch((function(t){return console.log("Error!",t)}))},className:"registro-form"},n.a.createElement("label",{htmlFor:"email"},"Email de usuario: "),n.a.createElement("input",{type:"email",name:"email",value:l,onChange:p,required:!0}),n.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a: "),n.a.createElement("input",{type:"password",name:"password",value:u,onChange:p,required:!0}),n.a.createElement("input",{type:"submit",value:"Registrarse"}),s&&n.a.createElement("h2",{className:"error"},s)))}))),y=a(27),b=(a(41),function(t){var e=t.producto,a=e.name,r=e.description,o=e.price,c=e.photo,i=t.agregarProducto;return n.a.createElement("td",{className:"producto"},n.a.createElement("p",null,"Item: ",a),n.a.createElement("p",null,"Descripcion: ",r),n.a.createElement("p",null,"Costo: ",o),n.a.createElement("p",null,n.a.createElement("img",{src:c,height:"100px",width:"100px"})),n.a.createElement("input",{type:"button",value:"Agregar",onClick:function(){return i(a,o)}}))}),S=function(t){var e=t.productoCarrito,a=e.name,r=e.price,o=e.quantity,c=t.borrarProducto,i=t.restarProducto,l=t.sumarProducto;return n.a.createElement("p",null," ",n.a.createElement("span",null,"Item: ",a,"  ----  "),n.a.createElement("input",{type:"button",value:"-",onClick:function(){return i(a)}}),"Cantidad: ",n.a.createElement("input",{type:"text",value:o,readOnly:!0}),n.a.createElement("input",{type:"button",value:"+",onClick:function(){return l(a)}}),n.a.createElement("input",{type:"button",value:"Borrar",onClick:function(){return c(a)}}),n.a.createElement("span",null," Subtotal    ",n.a.createElement("input",{type:"text",value:r,readOnly:!0})))},C=a(14),O=a.n(C),j=function(t){function e(){var t,a;Object(l.a)(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(s.a)(this,(t=Object(p.a)(e)).call.apply(t,[this].concat(n)))).state={productos:[],filtrados:[],productosCarrito:[],total:0,cantidadItems:0,iva:0},a.sumarProducto=function(t){for(var e=a.state,r=e.productosCarrito,n=e.cantidadItems,o=0;o<r.length;o++)if(r[o].name===t){r[o].price=r[o].price+r[o].price/r[o].quantity,r[o].quantity=r[o].quantity+1,a.setState({productosCarrito:r}),a.setState({cantidadItems:n+1});var c=0;if(console.log(r),r.length>0){for(o=0;o<r.length;o++)console.log("vueltita con aux = "),c+=r[o].price;a.setState({total:c}),a.setState({iva:22*c/100}),a.setState({cantidadItems:n+1})}}},a.restarProducto=function(t){for(var e=a.state,r=e.productosCarrito,n=e.total,o=e.cantidadItems,c=0;c<r.length;c++)if(r[c].name===t)if(r[c].quantity>1)a.setState({total:n-r[c].price/r[c].quantity}),a.setState({iva:22*(n-r[c].price/r[c].quantity)/100}),r[c].price=r[c].price-r[c].price/r[c].quantity,r[c].quantity=r[c].quantity-1,a.setState({productosCarrito:r}),a.setState({cantidadItems:o-1});else{var i=r.filter((function(e){return e.name!==t})),l=r.filter((function(e){return e.name===t}))[0].price;a.setState({productosCarrito:i}),n-l<1?(a.setState({total:0}),a.setState({iva:0}),a.setState({cantidadItems:o-1})):(a.setState({total:n-l}),a.setState({iva:22*(n-l)/100}),a.setState({cantidadItems:o-1}))}},a.filtrar=function(t){var e=t.target.value,r=a.state.productos,n=[],o=!1;if(""===e)a.setState({filtrados:r});else for(var c=0;c<r.length;c++)r[c].name.includes(e)&&(o=!0,n.push(r[c]),console.log("Aca"));return o?a.setState({filtrados:n}):(console.log("Aqui"),a.setState({filtrados:r}))},a.borrarProducto=function(t){var e=a.state,r=e.productosCarrito,n=e.total,o=e.cantidadItems,c=r.filter((function(e){return e.name===t})),i=c[0].price;console.log("Voy a restar... "+i+" a "+n);var l=r.filter((function(e){return e.name!==t}));a.setState({productosCarrito:l}),console.log(r),a.setState({cantidadItems:o-c[0].quantity}),n-i<1?(a.setState({total:0}),a.setState({iva:0})):(a.setState({total:n-i}),a.setState({iva:22*(n-i)/100}))},a.agregarProducto=function(t,e){var r=a.state,n=r.productosCarrito,o=r.total,c=r.cantidadItems;if(n.filter((function(e){return e.name===t})).length>0){console.log("Entre en este");for(var i=0;i<n.length;i++)n[i].name===t&&(n[i].price=n[i].price+n[i].price/n[i].quantity,n[i].quantity=n[i].quantity+1,a.setState({productosCarrito:n}),a.setState({total:o+e}),a.setState({iva:22*(o+e)/100}),a.setState({cantidadItems:c+1}))}else{console.log("Entre en el otro");var l={name:t,price:e,quantity:1};a.setState({productosCarrito:[].concat(Object(y.a)(n),[l])}),a.setState({total:o+l.price}),a.setState({iva:22*(o+l.price)/100}),a.setState({cantidadItems:c+1})}},a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){"1"!==sessionStorage.getItem("usuarioLogueado")&&this.props.history.push("/login");var t=this;fetch("http://tiendaonline2020.herokuapp.com/api/product/all",{method:"GET",headers:{"Content-type":"application/json"}}).then((function(t){return t.json()})).then((function(e){t.setState({productos:e}),t.setState({filtrados:e})}))}},{key:"render",value:function(){var t=this,e=this.state,a=e.filtrados,r=e.productosCarrito,o=e.total,c=e.iva,i=e.cantidadItems;return n.a.createElement("div",null,console.log("Cargarrrrrrrrrrr"),console.log(a.length),n.a.createElement("p",null," Busqueda ",n.a.createElement("input",{type:"Text",id:"unId",onChange:this.filtrar})),n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,a.slice(0,7).map((function(e,a){return n.a.createElement(b,{key:a,producto:e,agregarProducto:t.agregarProducto})}))),n.a.createElement("tr",null,a.slice(8,14).map((function(e,a){return n.a.createElement(b,{key:a,producto:e,agregarProducto:t.agregarProducto})}))))),n.a.createElement("div",{id:"carrito"},n.a.createElement("p",null,"Este es su carrito"),0===r.length?n.a.createElement("p",null,"No hay ningun producto en su carrito"):r.map((function(e,a){return n.a.createElement(S,{key:a,productoCarrito:e,borrarProducto:t.borrarProducto,sumarProducto:t.sumarProducto,restarProducto:t.restarProducto})})),n.a.createElement("p",null,"Total: ",n.a.createElement("input",{type:"text",value:o,readOnly:!0})," "),n.a.createElement("p",null,"Iva: ",n.a.createElement("input",{type:"text",value:c,readOnly:!0})," "),n.a.createElement("div",{className:"container",style:{height:"50px",width:"50px",display:"inline-block",margin:"5px",backgroundColor:"gray"}},n.a.createElement(O.a,{count:i,effect:C.Effect.SCALE}))))}}]),e}(n.a.Component),I=Object(d.f)(j),w=function(){return n.a.createElement("h2",null,"Ups! No existe la p\xe1gina que est\xe1s buscando... :-(")},q=(a(44),function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("p",null,"Obligatorio")),n.a.createElement(d.c,null,n.a.createElement(d.a,{path:"/login",component:E,exact:!0}),n.a.createElement(d.a,{path:"/registro",component:v,exact:!0}),n.a.createElement(d.a,{path:"/productos",component:I,exact:!0}),n.a.createElement(d.a,{component:w})))}}]),e}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(i.a,null,n.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.83dece0e.chunk.js.map